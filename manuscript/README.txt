This directory contains the necessary tools to reproduce the results of the manuscript. The analysis directory contains the tools necessary to run the experiments, and the figures directory contains the scripts that generate each figure.

In the analysis directory, each subdirectory (experiment) contains the following:
- `antigen-analysis-noFig.m`: generates summary statistics for each simulation
- `constant_parameters.json`: a set of default parameters used in generating the parameters for each simulation
- `job.sbatch`: an batch script for running the experiment on a SLURM cluster
- `make_database.py`: a script for compiling the results into a single SQLite database. `summarize.py` may also be present for summarizing additional statistics
- `run_[experiment].py`: a script for generating the experiment and submitting the batch script to a SLURM cluster.
- `write_params_to_sqlite.py`: a script that compiles all the parameters from each simulation into a single SQLite database. This can be used for archival purposes.

- `parameters_out.sqlite`: a SQLite database containing all of the parameters for every simulation run for the experiment
- `results.sqlite`: the compiled results from the experiment

To run an experiment:
0. Retrieve the antigen-phylogeography model.
1. Follow the instructions in antigen-phylogeography to create the `dist` distribution directory.
2. Copy the experiment directory into `dist`, and execute run_[experiment].py
3. Remove (or otherwise rename) results.sqlite and parameters_out.sqlite; the `make_database.py` and `write_params_to_sqlite.py` scripts will not automatically overwrite these files.
4. Once the sweep is finished, run `make_database.py`, (followed by `summarize.py` if it exists) to compile the results into a SQLite database.
5. Run `write_params_to_sqlite.py` if desired for archival purposes.
6. Figures can be generated by executing the scripts in `/figures/[experiment]`

To generate figure 1, an example run (6) is provided in `/analysis/default_params`. This can be substituted by any other directory that contains the output from a simulation, and the associated figure script will generate figures specific to that simulation.